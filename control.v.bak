module control (
  input clock,
  output wire hsync,    
  output wire vsync,    
  output [7:0] red,     
  output [7:0] green,   
  output [7:0] blue,    
  output sync,          
  output clk,           
  output blank      
);

reg  [15:0] endereco_pixel;
wire [15:0]  pixels;
wire proximo_x, proximo_y;
reg clock_vga;
reg enviar_alto;


initial begin
	 clock_vga = 0;
    endereco_pixel = 16'h0000;
	 proximo_x = 0;
	 proximo_y = 0;
end

ram ram_instancia(endereco_pixel, 16'h0000, 1'b1, 1'b0, pixels);

reg clock_vga;

always @(posedge clock) begin
	enviar_alto = ~enviar_alto;
	clock_vga <= ~clock_vga;
end

wire [7:0] color;

if (proximo_x >= 160 && proximo_x < 480 && proximo_y >= 120 && proximo_y < 360) begin
	
	if (enviar_alto) begin 
		color = pixels[15:8];
	end else begin
		color = pixels[7:0];
		endereco_pixel = endereco_pixel + 1;
	end
	
end else begin
	color = 8'h00;
end

vga_module vga_module_inst (
    clock_vga, 
    1'b0,     
    color, 
    proximo_x,
    proximo_y,  // y-coordinate of NEXT pixel that will be drawn
    
);


endmodule